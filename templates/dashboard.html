<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard - Expenzo</title>
  <link rel="stylesheet" href="static/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="profile">
      <img src="https://img.icons8.com/ios-filled/50/ffffff/user.png" alt="Profile">
      <p>{{ name }}</p>
    </div>
    <ul class="menu">
      <li><a href="#">Home</a></li>
      <li><a href="#">Cards</a></li>
      <li><a href="#">Income</a></li>
      <li><a href="#">Expense</a></li>
      <li><a href="#">Visualization</a></li>
      <li><a href="#">Transactions</a></li>
      <li><a href="#">Limits</a></li>
      <li><a href="#">Subscriptions</a></li>
      <li><a href="#">Settings</a></li>
    </ul>
    <a href="{{ url_for('logout') }}" class="logout-btn">Logout</a>
  </aside>

  <!-- Main Content -->
  <main class="dashboard">
    <h1>Expenzo Dashboard</h1>

    <div class="grid">
      <!-- Cards -->
      <div class="box">
        <h3>Your Cards</h3>
        {% for card in cards %}
          <p>{{ card['card_number'] }} ({{ card['type'] }})</p>
        {% endfor %}
        <button class="btn">+ Add Card</button>
      </div>

      <!-- Transactions -->
      <div class="box">
        <h3>Transactions</h3>
        <select id="filter">
          <option value="week">This Week</option>
          <option value="month">This Month</option>
          <option value="year">This Year</option>
        </select>
        <ul>
          {% for t in transactions %}
            <li>{{ t["name"] }} - ${{ t["amount"] }} - {{ t["status"] }} - {{ t["note"] }}</li>
          {% endfor %}
        </ul>
      </div>

      <!-- Total Summary -->
      <div class="box">
        <h3>Totals</h3>
        <p>Total Income: ${{ total_income }}</p>
        <p>Total Expense: ${{ total_expense }}</p>
      </div>

      <!-- Charts -->
      <div class="box">
        <h3>Visualization</h3>
        <canvas id="expenseChart"></canvas>
      </div>

      <!-- Limits -->
      <div class="box">
        <h3>Monthly Limit</h3>
        <progress value="{{ total_expense }}" max="5000"></progress>
        <p>Limit: $5000</p>
      </div>

      <!-- Subscriptions -->
      <div class="box">
        <h3>Subscriptions</h3>
        {% for s in subscriptions %}
          <p>{{ s["name"] }} - ${{ s["price"] }} - Renews: {{ s["renewal_date"] }}</p>
        {% endfor %}
      </div>
    </div>
  </main>

  <script src="static/script.js"></script>
</body>
</html>
